# 投资回测工具 - 布局重设计方案

## 设计方案概述

基于金融产品的用户体验最佳实践，重新设计后更加用户友好、信息层次清晰，突出关键数据对比。

## 核心布局结构（桌面端）

### 左侧：参数设置面板（保持不变）
**位置**：屏幕左侧固定宽度340px
**优化点**：
- 保持现有交互逻辑良好，不做大改动
- 添加快捷日期选择的视觉强调
- 优化按钮和输入框的悬停效果

---

## 右侧：主展示区域（全新布局）

### 1. 顶部标题和视图切换（保持）
**高度**：60px
**内容**：
- 左侧：图表标题（定投成本 vs 价格趋势 / 年化收益率趋势）
- 右侧：视图切换按钮（📈 切换到年化收益率 / 💰 切换到成本收益）

---

### 2. 关键指标卡片（顶部突出显示）
**布局**：8个统计卡片 → 重组为4个核心卡片
**优势**：减少信息噪音，突出关键对比数据

```
┌─────────────────────┬─────────────────────┬─────────────────────┬─────────────────────┐
│  定投执行概况       │  区间收益率       │   资产增长分析       │  年化收益率       │
│                     │                     │                     │                     │
│  💰 投入总额        │  📈 定投收益率      │  💼 期末总资产       │  ⚡ 定投年化收益     │
│  ¥120,000           │  +25.5% / +15.2%    │  ¥60,000 / ¥52.000   │  8.5% vs 5.2%       │
│  48期 × ¥2,500      │  定投优于一次性     │  定投 > 一次性       │  定投策略更优       │
└─────────────────────┴─────────────────────┴─────────────────────┴─────────────────────┘
```

**卡片详情**：

| 卡片 | 图标 | 主标题 | 主数值 | 副标题 | 副数值 |
|------|------|--------|--------|--------|--------|
| **定投执行概况** | 💰 | 投入总额 | ¥120,000 | 执行期数 | 48期 × ¥2,500 |
| **区间收益率** | 📈 | 收益率对比 | +25.5% / +15.2% | 结论 | 定投优于一次性 |
| **资产增长分析** | 💼 | 期末资产 | ¥60,000 / ¥52,000 | 对比 | 定投 > 一次性 |
| **年化收益率** | ⚡ | 年化收益 | 8.5% vs 5.2% | 评价 | 定投策略更优 |

**视觉设计**：
- 卡片使用蓝紫色渐变边框
- 主数值使用大号字体（24px），次要信息使用小号（12px）
- 正收益使用红色（🇨🇳传统），负收益使用绿色
- 卡片悬停上浮2px，添加阴影效果

---

### 3. 图表显示区域（核心优化）
**高度**：桌面端 50vh（固定），移动端 40vh（max-height）
**优化点**：
- 更大的图表显示区域
- 图例固定在左上角
- 支持快捷键缩放（Ctrl+滚轮）
- 支持移动端的平滑滚动和触摸手势

**功能改进**：
- 鼠标悬停显示详细工具提示（包含多条曲线数据）
- 支持双击重置缩放
- 图表区域支持拖拽平移
- 新增"缩放控制浮层"（右上角）
  - 🔍+ 放大
  - 🔍- 缩小
  - 🔄 重置

---

### 4. 投资记录表格（优化显示）
**高度**：桌面端 200px（固定），移动端 150px（max-height）

**改进点**：
- 表格标题行添加渐变背景
- 行数据使用斑马纹（可选，降低视觉冲击）
-  responsive design：
  - 桌面端显示完整5列
  - 移动端简化显示：日期、金额、份额（隐藏"类型"和"净值"）
- 表格右上角添加"导出CSV"按钮

**表头设计**：
```
┌─────────────────────────────┐
│ 📋 投资记录         [导出CSV]│
├─────────────────────────────┤
│ 日期    类型   单位净值  金额  份额  │
├─────────────────────────────┤
│ 2023-01  定投   ¥2.50    ¥1k   400  │
│ 2023-02  定投   ¥2.60    ¥1k   384  │
└─────────────────────────────┘
```

---

## 移动端适配方案

### 响应式断点：768px

**布局变化**：
1. **统计卡片**：4列 → 2列（横向滚动）
2. **图表高度**：50vh → 40vh（max-height: 40vh）
3. **表格**：
   - 显示列数从5列 → 3列
   - 高度从200px → 150px
4. **侧边栏**：固定浮层，手势滑动关闭

**移动端交互优化**：
- 图表区域支持双指缩放
- 侧边栏可从左侧边缘右滑打开
- 表格支持横向滑动查看完整数据

---

## 视觉设计规范

### 颜色系统
- **背景**：深色系渐变（#0a0a0a → #1a1a1a）
- **卡片**：#1c1c1c（带90%不透明度）
- **边框**：#2a2a2a
- **主色调**：#4a9eff（蓝色）
- **强调色**：#FFD700（黄金，用于正收益）
- **警示色**：#52c41a（绿色，用于负收益，符合中国用户习惯）

### 字体系统
- **标题**：18px，font-bold
- **主数值**：24px，font-semibold
- **副数值**：12px，font-medium
- **标签**：11px，font-medium，大写

### 阴影和效果
- **卡片阴影**：box-shadow: 0 4px 20px rgba(0,0,0,0.3)
- **悬停效果**：
  - transform: translateY(-2px)
  - box-shadow: 0 8px 30px rgba(74,158,255,0.2)
- **按钮点击**：scale(0.98)

---

## 用户体验优化

### 1. 加载体验
- 使用骨架屏（skeleton）而不是简单loading动画
- 数据加载分阶段：
  1. 参数获取（快速）
  2. 历史数据获取（中等）
  3. 回测计算（慢）
  4. 图表渲染（快速）

### 2. 空状态设计
- 初次访问时显示引导性空状态
- 包含使用说明和示例数据推荐
- 添加"查看示例"快速体验功能

### 3. 错误处理
- 网络错误：重试按钮 + 错误代码
- 数据错误：提示检查基金代码
- 计算错误：显示详细错误信息（开发模式）

### 4. 数据导出功能
- 导出完整回测数据（CSV/JSON）
- 导出图表截图（PNG）
- 投资价值分析报告（PDF）

---

## 信息架构

```
投资回测工具
├── 参数设置区（左侧）
│   ├── 基金代码
│   ├── 投资金额
│   ├── 定投频率
│   └── 日期范围
│
└── 结果展示区（右侧）
    ├── 标题和视图切换
    ├── 核心指标卡片（4组对比数据）
    ├── 图表展示（交互式）
    └── 投资记录明细（表格）
```

---

## 性能优化建议

1. **虚拟滚动**：投资记录超过1000条时使用虚拟滚动
2. **图表懒加载**：只在图表进入视口时初始化
3. **数据缓存**：缓存基金历史数据，减少API调用
4. **防抖处理**：图表缩放和滚动事件防抖（300ms）

---

## 可访问性（Accessibility）

- 键盘导航支持（Tab键顺序）
- 屏幕阅读器支持（ARIA标签）
- 颜色对比度符合WCAG 2.1 AA标准
- 操作反馈清晰（aria-live regions）

---

## 实现优先级建议

1. **P0（核心）**：统计卡片重组 → 图表区域优化 → 表格优化
2. **P1（体验）**：移动端适配 → 加载优化 → 空状态设计
3. **P2（增强）**：数据导出 → 快捷键 → 高级交互

---

预期效果：专业投资工具的视觉体验，简化信息层次，突出核心对比数据，提升用户决策效率。
